---
layout: default
microblog_js: 
  - microblog.js
---
<div class="home">
	<section class="site-header">
		<h1 class="smallcap"><a class="site-title" href="{{ site.baseurl }}/">{{ site.title }}</a></h1>
		{% include nav.html %}
		{% include intro.html %}
  </section>
	<section>
		<ul id='micropost-list' class="post-list">
		</ul>
	</section>
</div>
<script type="text/javascript">
	load = async function() {
		url = "https://robertsapunarich.micro.blog/feed.json"
		payload = await fetch(url).then((response) => {
			return response
		}).then((response) => {
			if (response.ok) {
				return(response.json())
			}
		}).then((data) => {
			return data
		})

		console.log(payload)
		return payload
	}

	load().then((data) => {
		const post_list = document.querySelector("#micropost-list")
		console.log(data)
		data.items.map((item) => {
				console.log(item)
				list_item = document.createElement('li')
				post_list.appendChild(list_item)
				list_item.innerHTML = item.content_html
			}
		) 
	}
	);
</script>